(this["webpackJsonpmimi-fe"]=this["webpackJsonpmimi-fe"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),i=n.n(s),r=n(31),c=n.n(r),o=(n(40),n(2)),l=n(3),h=n(6),d=n(5),u=(n(41),n(4)),j=n(8),b=n(17),p=n.n(b),g=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,n,a,s,i){return t.service.post("/signup",{username:e,password:n,email:a,name:s,fileUrl:i})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n})},this.logout=function(){return t.service.post("/logout")},this.loggedin=function(){return t.service.get("/loggedin")};var n=p.a.create({baseURL:"".concat("https://mimimgd.herokuapp.com","/api"),withCredentials:!0});this.service=n},m=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).logoutUser=function(){(new g).logout().then((function(){e.props.setCurrentUser(null),localStorage.removeItem("loggedInUser")}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.loggedInUser?Object(a.jsx)("div",{className:"navbar-top",children:Object(a.jsxs)("header",{children:[Object(a.jsx)("div",{class:"overlay"}),Object(a.jsx)("video",{playsinline:"playsinline",autoplay:"autoplay",muted:"muted",loop:"loop",children:Object(a.jsx)("source",{src:"beyonce.mp4",type:"video/mp4"})}),Object(a.jsx)("div",{class:"container h-100",children:Object(a.jsx)("div",{class:"d-flex h-100 text-center align-items-center",children:Object(a.jsx)("div",{class:"w-100 text-white",children:Object(a.jsxs)("div",{className:"lead mb-6 width: 50vh",children:[Object(a.jsx)(j.c,{activeStyle:{color:"red"},exact:!0,to:"/main",children:"Home"}),Object(a.jsx)(j.c,{activeStyle:{color:"red"},exact:!0,to:"/profile",children:"Profile"}),Object(a.jsx)(j.c,{to:"/",children:Object(a.jsx)("button",{onClick:this.logoutUser,children:"Logout"})})]})})})})]})}):Object(a.jsx)("div",{children:Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{activeStyle:{color:"red"},exact:!0,to:"/login",children:"Login"})}),Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{activeStyle:{color:"red"},exact:!0,to:"/signup",children:"Signup"})})]})})})}}]),n}(i.a.Component),O=n(13),f=function(){function e(){Object(o.a)(this,e);var t=p.a.create({baseURL:"".concat("https://mimimgd.herokuapp.com","/api"),withCredentials:!0});this.service=t}return Object(l.a)(e,[{key:"getAllPictures",value:function(){return this.service.get("/main")}},{key:"getProfile",value:function(){return this.service.get("/profile")}},{key:"getMyProfile",value:function(){return this.service.get("/my-profile")}},{key:"editProfile",value:function(e){return this.service.put("/edit-profile",e)}},{key:"addPost",value:function(e,t,n){return this.service.post("/create-post",{imageUrl:e,description:t,id:n})}},{key:"uploadFile",value:function(e){return this.service.post("/upload",e)}},{key:"getTrends",value:function(){return this.service.get("/trends")}}]),e}(),x=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",email:"",name:"",file:""},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(O.a)({},a,s))},e.handleFormSubmit=function(t){t.preventDefault();var n=new g,a=new f,s=new FormData;s.append("file",e.state.file),a.uploadFile(s).then((function(t){n.signup(e.state.username,e.state.password,e.state.email,e.state.name,t.data.fileUrl).then((function(){e.props.history.push("/main")})).catch((function(e){console.log(e)}))}))},e.handleFileChange=function(t){e.setState({file:t.target.files[0]})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{style:{backgroundImage:"url(".concat(this.state.bgImage,")"),backgroundSize:"cover"},children:[Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,encType:"multipart/form-data",children:[Object(a.jsx)("label",{children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Password:"}),Object(a.jsx)("input",{name:"password",value:this.state.password,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Email:"}),Object(a.jsx)("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Name:"}),Object(a.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Profile picture"}),Object(a.jsx)("input",{type:"file",onChange:this.handleFileChange}),Object(a.jsx)("input",{type:"submit",value:"Signup"})]}),Object(a.jsxs)("p",{children:["Already have account?",Object(a.jsx)(j.b,{to:"/login",children:" Login"})]})]})}}]),n}(i.a.Component),v=Object(u.g)(x),y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(O.a)({},a,s))},e.handleFormSubmit=function(t){t.preventDefault(),(new g).login(e.state.username,e.state.password).then((function(t){e.props.setCurrentUser(t.data),localStorage.setItem("loggedInUser",t.data._id),e.props.history.push("/main")})).catch((function(){console.log("Invalid Login")}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{class:"sidenav",children:Object(a.jsxs)("div",{class:"login-main-text",children:[Object(a.jsx)("h2",{children:"MiMi"}),Object(a.jsx)("h2",{children:"Login Page"}),Object(a.jsx)("p",{children:"Login here to access."})]})}),Object(a.jsx)("div",{class:"main",children:Object(a.jsx)("div",{class:"col-md-6 col-sm-12",children:Object(a.jsx)("div",{class:"login-form",children:Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{children:"User Name"}),Object(a.jsx)("input",{type:"text",class:"form-control",name:"username",placeholder:"User Name",value:this.state.username,onChange:this.handleChange,required:!0})]}),Object(a.jsxs)("div",{class:"form-group",children:[Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",class:"form-control",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0})]}),Object(a.jsx)("button",{type:"submit",class:"btn btn-black",children:"Login"}),Object(a.jsxs)("p",{children:["Don't have account?",Object(a.jsx)(j.b,{to:"/signup",children:" Signup"})]})]})})})})]})}}]),n}(i.a.Component),C=Object(u.g)(y),U=(n(64),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={posts:[],bgImage:"",trends:[],username:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new f;t.getAllPictures().then((function(t){e.setState({posts:t.data})})),t.getMyProfile().then((function(t){console.log(t),e.setState({bgImage:t.data.thisUser.bgImage,username:t.data.thisUser.username})})),t.getTrends().then((function(t){var n=t.data.splice(0,10);console.log(t.data),e.setState({trends:n})}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Trending on Twitter"}),Object(a.jsx)("div",{class:"ticker-wrap",children:Object(a.jsxs)("div",{class:"ticker",children:[Object(a.jsx)("div",{class:"ticker__item",children:"Letterpress chambray brunch."}),Object(a.jsx)("div",{class:"ticker__item",children:"Vice mlkshk crucifix beard chillwave meditation hoodie asymmetrical Helvetica."}),Object(a.jsx)("div",{class:"ticker__item",children:"Ugh PBR&B kale chips Echo Park."}),Object(a.jsx)("div",{class:"ticker__item",children:"Gluten-free mumblecore chambray mixtape food truck. "})]})}),Object(a.jsx)("ul",{children:this.state.trends.length>0?this.state.trends.map((function(e,t){return Object(a.jsx)("li",{children:Object(a.jsx)("p",{children:e.name})},t)})):null})]}),Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"This is the main page"})}),Object(a.jsx)("div",{class:"row",children:Object(a.jsx)("div",{className:"container d-flex flex-wrap",children:this.state.posts.length>0?this.state.posts.map((function(e,t){return Object(a.jsx)("div",{class:"card-box col-md-5 col-sm-12",children:Object(a.jsxs)("div",{class:"card card-with-border","data-background":"image","data-src":e.imageUrl,children:[Object(a.jsx)("img",{className:"image-card",src:e.imageUrl,alt:"post",width:"150px",height:"550px"}),Object(a.jsx)("div",{class:"content text-center",children:Object(a.jsx)("p",{class:"description",children:e.description})})]})})})):null})}),Object(a.jsx)("div",{class:"page-description-footer",children:Object(a.jsxs)("p",{children:["Copyright \xa9 2020 ",Object(a.jsx)("a",{href:"github.com/margaridagdias",children:"Margarida Dias"}),", made with ",Object(a.jsx)("i",{class:"fa fa-heart ct-heart"})," for a better web."]})}),Object(a.jsx)("script",{src:"assets/js/jquery-1.10.2.js",type:"text/javascript"}),Object(a.jsx)("script",{src:"assets/js/bootstrap.min.js",type:"text/javascript"}),Object(a.jsx)("script",{src:"assets/js/hipster-cards.js"})]})}}]),n}(i.a.Component)),w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",name:"",bio:"",profilePicture:"",backgroundImage:"",font:""},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(O.a)({},a,s))},e.handleFormSubmit=function(t){t.preventDefault();var n=new f,a=new FormData;a.append("file",e.state.profilePicture);var s=new FormData;s.append("file",e.state.backgroundImage),n.uploadFile(a).then((function(t){return n.uploadFile(s).then((function(a){var s={username:e.state.username,email:e.state.email,name:e.state.name,bio:e.state.bio,imageUrl:t.data.fileUrl,bgImage:a.data.fileUrl,font:e.state.font};return n.editProfile(s).then((function(){e.props.history.push("/profile")}))}))}))},e.handleFileChange=function(t){var n=t.target.name;e.setState(Object(O.a)({},n,t.target.files[0]))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(new f).getMyProfile().then((function(t){e.setState({username:t.data.thisUser.username,email:t.data.thisUser.email,name:t.data.thisUser.name,bio:t.data.thisUser.bio})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(a.jsx)("label",{children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",onChange:this.handleChange,value:this.state.username}),Object(a.jsx)("label",{children:"Email:"}),Object(a.jsx)("input",{type:"text",name:"email",onChange:this.handleChange,value:this.state.email}),Object(a.jsx)("label",{children:"Name:"}),Object(a.jsx)("input",{type:"text",name:"name",onChange:this.handleChange,value:this.state.name}),Object(a.jsx)("label",{children:"Bio"}),Object(a.jsx)("input",{type:"text",name:"bio",onChange:this.handleChange,value:this.state.bio}),Object(a.jsx)("label",{children:"Profile Picture"}),Object(a.jsx)("input",{type:"file",name:"profilePicture",onChange:this.handleFileChange}),Object(a.jsx)("label",{children:"Background Image"}),Object(a.jsx)("input",{type:"file",name:"backgroundImage",onChange:this.handleFileChange}),Object(a.jsx)("label",{children:"Font"}),Object(a.jsxs)("select",{name:"font",onChange:this.handleChange,children:[Object(a.jsx)("option",{value:"Segoe UI",children:"Font A"}),Object(a.jsx)("option",{value:"Comic Sans MS",children:"Font b"}),Object(a.jsx)("option",{value:"Bradley Hand",children:"Font c"})]}),Object(a.jsx)("button",{children:"Save"})]})})}}]),n}(i.a.Component),k=Object(u.g)(w),I=n(16),S=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).flip=function(){a.setState({flipped:!a.state.flipped})},a.state={flipped:!1},a.flip=a.flip.bind(Object(I.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(a.jsxs)("div",{onMouseEnter:this.flip,onMouseLeave:this.flip,className:"card-container"+(this.state.flipped?" flipped":""),children:[Object(a.jsx)(F,{imageUrl:this.props.props.imageUrl}),Object(a.jsx)(P,{description:this.props.props.description})]})}}]),n}(i.a.Component),F=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(a.jsx)("div",{className:"front",children:Object(a.jsx)(N,{imageUrl:this.props.imageUrl})})}}]),n}(i.a.Component),P=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"back",children:Object(a.jsx)("p",{children:this.props.description})})}}]),n}(i.a.Component),N=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"image-container",children:Object(a.jsx)("img",{className:"card-image",src:this.props.imageUrl})})}}]),n}(i.a.Component),D=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",bio:"",image:"",posts:[],bgImage:"",font:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(new f).getMyProfile().then((function(t){console.log(t),e.setState({username:t.data.thisUser.username,image:t.data.thisUser.imageUrl,bio:t.data.thisUser.bio,posts:t.data.post,bgImage:t.data.thisUser.bgImage,font:t.data.thisUser.font}),document.body.style.fontFamily=e.state.font}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"This is the profile page"}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return e.props.history.push("/edit-profile")},children:"Edit"})}),Object(a.jsx)("div",{className:"Container",children:Object(a.jsx)("img",{src:this.state.image,alt:"",width:"100px",height:"150px"})}),Object(a.jsxs)("h2",{children:["user:",this.state.username]}),Object(a.jsxs)("h3",{children:["bio: ",this.state.bio]}),Object(a.jsx)("div",{className:"container d-flex mb-5 flex-wrap space-around",children:this.state.posts.length>0?this.state.posts.map((function(e,t){return Object(a.jsx)(S,{props:e})})):null}),Object(a.jsx)("div",{className:"profile-btn mt-5",children:Object(a.jsxs)("footer",{class:"page-footer font-small white",children:[Object(a.jsx)("button",{onClick:function(){return e.props.history.push("/create-post")},children:"Create New Post"}),Object(a.jsx)("div",{children:Object(a.jsx)("audio",{src:"savage.mp3",autoplay:!0,controls:!0,children:"Error: your web browser does not support this audio player."})})]})})]})}}]),n}(i.a.Component),M=Object(u.g)(D),A=n(33),L=n(34),_=function(e){e.authorized;var t=e.redirect,n=Object(L.a)(e,["authorized","redirect"]);return localStorage.getItem("loggedInUser")?Object(a.jsx)(u.b,Object(A.a)({},n)):Object(a.jsx)(u.a,{to:t})},T=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={file:"",description:"",bgImage:""},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(O.a)({},a,s))},e.handleFormSubmit=function(t){t.preventDefault();var n=new f,a=new FormData;a.append("file",e.state.file),n.uploadFile(a).then((function(t){return console.log(t),n.addPost(t.data.fileUrl,e.state.description,e.props.loggedInUser._id).then((function(){e.props.history.push("/main")}))}))},e.handleFileChange=function(t){e.setState({file:t.target.files[0]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(new f).getMyProfile().then((function(t){console.log(t),e.setState({bgImage:t.data.thisUser.bgImage})}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{style:{backgroundImage:"url(".concat(this.state.image,")"),backgroundSize:"cover",width:"100%",height:"100vh"},children:[Object(a.jsx)("h2",{children:"New Post"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,encType:"multipart/form-data",children:[Object(a.jsx)("label",{children:"New photo"}),Object(a.jsx)("input",{type:"file",onChange:this.handleFileChange}),Object(a.jsx)("label",{children:"Description"}),Object(a.jsx)("input",{type:"text",name:"description",value:this.state.description,onChange:this.handleChange}),Object(a.jsx)("input",{type:"submit",value:"Post"})]})]})}}]),n}(i.a.Component),B=Object(u.g)(T),E=n.p+"static/media/background.2dd1f8d5.jpg",z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={loggedInUser:null,bgImage:E},e.setCurrentUser=function(t){e.setState({loggedInUser:t}),e.setBgImage()},e.setBgImage=function(){e.state.loggedInUser?e.setState({bgImage:e.state.loggedInUser.bgImage}):e.setState({bgImage:E})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;null===this.state.loggedInUser&&(new g).loggedin().then((function(t){t.data._id?(e.setCurrentUser(t.data),localStorage.setItem("loggedInUser",t.data._id)):localStorage.removeItem("loggedInUser")}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"App",style:{backgroundImage:this.state.loggedInUser?"url(".concat(this.state.bgImage,")"):"url(".concat(E,")"),backgroundSize:"cover",width:"100%",height:"100vh"},children:[Object(a.jsx)(m,{loggedInUser:this.state.loggedInUser,setCurrentUser:this.setCurrentUser}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(_,{exact:!0,path:"/main",redirect:"/login",render:function(e){return Object(a.jsx)(U,{})}}),Object(a.jsx)(_,{exact:!0,path:"/profile",redirect:"/login",render:function(e){return Object(a.jsx)(M,{})}}),Object(a.jsx)(_,{path:"/profile/:id",redirect:"/login",render:function(e){return Object(a.jsx)(M,{})}}),Object(a.jsx)(_,{path:"/create-post",redirect:"/login",render:function(t){return Object(a.jsx)(B,{loggedInUser:e.state.loggedInUser})}}),Object(a.jsx)(_,{path:"/edit-profile",redirect:"/login",render:function(e){return Object(a.jsx)(k,{})}}),Object(a.jsx)(u.b,{path:"/signup",component:v}),Object(a.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(C,{setCurrentUser:e.setCurrentUser})}}),Object(a.jsx)(u.b,{exact:!0,path:"/login",render:function(){return Object(a.jsx)(C,{setCurrentUser:e.setCurrentUser})}})]})]})}}]),n}(i.a.Component),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(j.a,{children:Object(a.jsx)(z,{})})}),document.getElementById("root")),q()}},[[65,1,2]]]);
//# sourceMappingURL=main.57ef2157.chunk.js.map